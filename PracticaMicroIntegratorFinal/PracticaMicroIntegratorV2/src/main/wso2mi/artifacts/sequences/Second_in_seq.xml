<?xml version="1.0" encoding="UTF-8"?>
<sequence name="Second_in_seq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <property name="Datos" scope="default" type="STRING" expression="${payload}"/>
    <call>
        <endpoint key="BackEnd"/>
    </call>
    <switch source="get-property('axis2','HTTP_SC')">
        <case regex="200">
            <property name="TipoAnniooo" scope="default" type="STRING" expression="${payload}"/>
            <payloadFactory media-type="json" template-type="default">
                <format>${properties.synapse.Datos}</format>
            </payloadFactory>
            <sequence key="third_in_seq"/>
        </case>
        <case regex="400">
            <payloadFactory media-type="json" template-type="default">
                <format>{Año inválido, ingresa un año válido}</format>
            </payloadFactory>
        </case>
        <case regex="500">
            <payloadFactory media-type="json" template-type="default">
                <format>{Lo sentimos, ocurrió un error interno en el servidor. Por favor, intenta nuevamente más tarde.}</format>
            </payloadFactory>
        </case>
        <default>
            <payloadFactory media-type="json" template-type="default">
                <format>{Se produjo un fallo inesperado en el servidor al procesar la solicitud}</format>
            </payloadFactory>
        </default>
    </switch>
    <respond/>
</sequence>