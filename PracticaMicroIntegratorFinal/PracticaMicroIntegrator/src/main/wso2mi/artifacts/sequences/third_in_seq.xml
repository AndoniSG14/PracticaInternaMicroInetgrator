<?xml version="1.0" encoding="UTF-8"?>
<sequence name="third_in_seq" trace="disable" xmlns="http://ws.apache.org/ns/synapse">
    <property name="YearType" scope="default" type="STRING" expression="${payload}"/>
    <script language="js"><![CDATA[
    var  tipoAnnioJSON= JSON.parse(mc.getProperty("YearType"));
    var  datosString= JSON.parse(mc.getProperty("Datos"));


    const a単oActual = new Date().getFullYear();

    var edad = a単oActual - parseInt(datosString.anioNacimiento);

    var informacion = {
        "Nombre": datosString.nombre,
        "A単o de nacimiento": datosString.anioNacimiento,
        "Carrera": datosString.carrera,
        "Ciudad": datosString.entidad_federativa,
        "Edad": edad,
        "Tipo de a単o": tipoAnnioJSON.text
    };
    mc.setProperty("informacion_completa", JSON.stringify(informacion));
    mc.setPayloadJSON(informacion);
    
        ]]></script>
    <log category="INFO" logMessageID="false" logFullPayload="false">
        <message>${payload} UltimoPaylaod</message>
    </log>
    
    <respond/>
</sequence>